{"version":3,"sources":["components/Searchbar.jsx","components/ImageGalleryItem.jsx","components/Button.jsx","components/Modal.jsx","components/ImageGallery.jsx","App.js","index.js"],"names":["Searchbar","state","value","handleChange","e","setState","currentTarget","toLowerCase","console","log","target","handleSearch","preventDefault","trim","toast","error","props","onSubmit","className","this","type","name","placeholder","onChange","Component","ImageGalleryItem","openModal","id","img","alt","largeImage","onClick","src","Button","loadMore","Modal","onEscClick","code","switch","handleClose","window","addEventListener","removeEventListener","createPortal","children","document","getElementById","ImageGallery","listItems","status","showModal","tryPage","modalImage","nextPage","axios","searchValue","then","list","data","hits","prevState","toggleModal","onPicClick","dataset","source","prevProps","setTimeout","color","height","width","timeout","map","item","webformatURL","largeImageURL","tags","App","handleFormSearch","autoClose","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.a7aedd59.chunk.js","sourcesContent":["import { Component } from \"react\"\r\n// import  axios from \"axios\" \r\nimport { toast } from \"react-toastify\"\r\n\r\nclass Searchbar extends Component {\r\n    state = {\r\n        value: ''\r\n    }\r\n    // componentDidMount() {\r\n    //     axios.get(\r\n    //         \"https://pixabay.com/api/?q=cat&page=1&key=23569558-943bf7c3d65c4197ad4bffe73&image_type=photo&orientation=horizontal&per_page=12\"\r\n    //     ).then(response => response.json())\r\n    //     .then(list => this.setState({list}))\r\n    // }\r\n    handleChange = (e) => {\r\n        this.setState({value: e.currentTarget.value.toLowerCase()})\r\n        console.log(e.target.value);\r\n    }\r\n\r\n    handleSearch = (e) => {\r\n        e.preventDefault();\r\n        if (this.state.value.trim() === '') { \r\n            return toast.error('搜索')\r\n        }\r\n        this.props.onSubmit(this.state.value)\r\n\r\n        this.setState({ value: ''})\r\n        // return data.hits.filter(hit => { \r\n        //     if (hit.tags.toLowerCase().includes(this.stete.value.toLocaleLowerCase))\r\n        //         return hit\r\n        // })\r\n    }\r\n    render() {\r\n    return  (  <div className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.handleSearch}>\r\n            <button className=\"SearchForm-button\" type=\"submit\">\r\n                <span className=\"SearchForm-button-label\">Search</span>\r\n            </button>\r\n            <input\r\n                className=\"SearchForm-input\"\r\n                name=\"search\"\r\n                type=\"text\"\r\n                placeholder=\"Search images and photos\"\r\n                onChange={this.handleChange}\r\n                value={this.state.value}>\r\n            </input>\r\n        </form>\r\n        </div>)\r\n    }\r\n}\r\n\r\nexport { Searchbar }","function ImageGalleryItem({ openModal, id, img, alt, largeImage, onClick }) {\r\n    function onLiClick(e) { \r\n        openModal()\r\n        onClick(e)\r\n    }\r\n    return (\r\n        <li id={id} key={id} onClick={onLiClick} className='ImageGalleryItem'>\r\n            <img\r\n                className=\"ImageGalleryItem-image\"\r\n                src={img}\r\n                alt={alt}\r\n                data-source={largeImage} />\r\n        </li>\r\n    )\r\n}\r\nexport default ImageGalleryItem","function Button({ loadMore }) { \r\n    return (\r\n        <button className=\"Button\" type=\"button\" onClick={loadMore}>\r\n            Load more\r\n        </button>\r\n    )\r\n}\r\nexport default Button","import { Component } from \"react\" \r\nimport {createPortal} from \"react-dom\"\r\n\r\nclass Modal extends Component{\r\n     componentDidMount(){\r\n        window.addEventListener(\"keydown\", this.onEscClick)\r\n    }\r\n    componentWillMount() { \r\n        window.removeEventListener(\"keydown\", this.onEscClick)\r\n    }\r\n    onEscClick = (e) => { \r\n        if (e.code === 'Escape') { \r\n            this.props.switch()\r\n        }\r\n    } \r\n    handleClose = (e) => { \r\n        if (e.currentTarget === e.target) { \r\n            this.props.switch()\r\n        }\r\n    }\r\n    render() {\r\n        return createPortal(\r\n            <div className=\"Overlay\" onClick={this.handleClose}>\r\n                <div className=\"Modal\">{this.props.children}</div>\r\n            </div>,\r\n            document.getElementById('modalRoot')\r\n        )\r\n    }\r\n}\r\nexport  {Modal}","import { Component } from \"react\";\r\nimport Loader from 'react-loader-spinner'\r\nimport axios from \"axios\";\r\nimport ImageGalleryItem from \"./ImageGalleryItem\";\r\nimport Button from './Button'\r\nimport { Modal } from \"./Modal\"\r\n\r\n\r\nclass ImageGallery extends Component {\r\n    state = {\r\n        listItems: [],\r\n        status: 'idle',\r\n        showModal: false, \r\n        tryPage: 1, \r\n        modalImage: ''\r\n    }\r\n    componentDidUpdate(prevProps, prevState) { \r\n        if (prevProps.searchValue !== this.props.searchValue) { \r\n            console.log(prevProps.searchValue, this.props.searchValue);\r\n            this.setState({status: \"pending\"})\r\n            setTimeout(() => axios(`https://pixabay.com/api/?q=${this.props.searchValue}&page=${this.state.tryPage}&key=23569558-943bf7c3d65c4197ad4bffe73&image_type=photo&orientation=horizontal&per_page=12`)\r\n                .then(list => list.data.hits)\r\n                .then(hits => this.setState({ listItems: hits, status: \"resolved\", tryPage: 1 }))\r\n                // .then(console.log))\r\n            , 1000)}\r\n    }\r\n    nextPage = () => { \r\n        this.state.tryPage += 1\r\n        axios(`https://pixabay.com/api/?q=${this.props.searchValue}&page=${this.state.tryPage}&key=23569558-943bf7c3d65c4197ad4bffe73&image_type=photo&orientation=horizontal&per_page=12`)\r\n            .then(list => list.data.hits)\r\n            .then(hits => this.setState(prevState => ({listItems: [...prevState.listItems, ...hits]})))\r\n    }\r\n    toggleModal = () => { \r\n        this.setState({\r\n            showModal: !this.state.showModal\r\n        })\r\n    }\r\n    onPicClick = (e) => { \r\n        console.log(e.target.dataset);\r\n        this.setState({\r\n            modalImage: e.target.dataset.source\r\n        })\r\n        console.log(this.state.modalImage);\r\n     }\r\n\r\n    render() { \r\n        if (this.state.status === \"idle\") { \r\n            return <div></div>\r\n        }\r\n        if (this.state.status === \"pending\") { \r\n            return <Loader\r\n                        type=\"Puff\"\r\n                        color=\"#00BFFF\"\r\n                        height={100}\r\n                        width={100}\r\n                        timeout={1000} //1 secs\r\n                    />\r\n        }\r\n        if (this.state.status === \"resolved\") { \r\n            return <>\r\n            <ul className=\"ImageGallery\">\r\n                {this.state.listItems.map(item =>{ return (\r\n                    <ImageGalleryItem\r\n                        img={item.webformatURL}\r\n                        largeImage={item.largeImageURL}\r\n                        alt={item.tags}\r\n                        id={item.id}\r\n                        onClick={this.onPicClick}\r\n                        openModal={ this.toggleModal}\r\n                    />\r\n                )})}\r\n                </ul>\r\n                <Button loadMore={this.nextPage}/>\r\n                {this.state.showModal && (\r\n                    <Modal switch={this.toggleModal}>\r\n                        <img className=\"modalImage\" src={ this.state.modalImage} alt=''/>\r\n                    </Modal>\r\n                )}\r\n                </>\r\n        }\r\n    }\r\n}\r\nexport {ImageGallery}","import './App.css';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css'\n// import axios from 'axios'\nimport {Component} from 'react'\nimport { Searchbar } from './components/Searchbar.jsx'\nimport {ImageGallery} from './components/ImageGallery.jsx'\n\n// axios.get(\"https://pixabay.com/api/?q=cat&page=1&key=23569558-943bf7c3d65c4197ad4bffe73&image_type=photo&orientation=horizontal&per_page=12\")\n// .then((response) => {\n//   console.log(response.data.hits);\n//   return response.data.hits\n// })\nclass App extends Component {\n  state = {\n    value: ''\n  }\n\n  handleFormSearch = value => { \n    this.setState({ value })\n  }\n  render(){ \n    \n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handleFormSearch} />\n        <ImageGallery searchValue={ this.state.value}/>\n        <ToastContainer autoClose={2000}/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}